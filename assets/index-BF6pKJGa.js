import{j as e,D as T,R as x,C as i,E as b,r as E,h as z,i as A,k as u,z as _,J as H,m as O,S as w,G as L,H as j,I as p}from"./index-Cx4XMxsI.js";import{u as U,a as W,b as B}from"./index-DsunrWsS.js";const F="_viewRequest_1u2is_1",P={viewRequest:F},V=({open:c,handleOk:l,handleCancel:h,handleClose:m,complaintData:s})=>{var r,d;return e.jsx("div",{className:P.viewRequest,children:e.jsxs(T,{title:"View Complaint",open:c,closeIcon:!0,handleOk:l,onCancel:h,handleClose:m,IsFooter:!1,handleContent:"Create",disabledButton:!1,children:[e.jsxs(x,{align:"middle",gutter:16,className:"mb-4",children:[e.jsx(i,{children:e.jsx(b,{size:70,src:"https://plus.unsplash.com/premium_photo-1682096259050-361e2989706d?fm=jpg&q=60&w=3000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8eW91bmclMjBtYW58ZW58MHx8MHx8fDA%3D"})}),e.jsx(i,{children:e.jsx("h4",{className:"fw-semibold",children:s==null?void 0:s.complainerName})})]}),e.jsxs(x,{gutter:[0,16],className:"mb-4",children:[e.jsxs(i,{span:24,children:[e.jsx("h5",{strong:!0,children:"Request Name"}),e.jsx("div",{children:s==null?void 0:s.complaintName})]}),e.jsxs(i,{span:24,children:[e.jsx("h5",{strong:!0,children:"Description"}),e.jsx("div",{children:s==null?void 0:s.discription})]})]}),e.jsxs(x,{className:"mb-4",children:[e.jsxs(i,{span:6,children:[e.jsx("h5",{children:"Wing"}),e.jsx("div",{children:(r=s==null?void 0:s.wingId)==null?void 0:r.wingName})]}),e.jsxs(i,{span:6,children:[e.jsx("h5",{children:"Unit"}),e.jsx("div",{children:(d=s==null?void 0:s.unitId)==null?void 0:d.unitNumber})]}),e.jsxs(i,{span:6,children:[e.jsx("h5",{children:"Priority"}),e.jsx("div",{children:s==null?void 0:s.priorityStatus})]}),e.jsxs(i,{span:6,children:[e.jsx("h5",{children:"Status"}),e.jsx("div",{children:s==null?void 0:s.status})]})]})]})})},G=()=>{const{dataListComplaint:c,fetchListComplaint:l,isLoading:h}=U("Request"),{formData:m,handleChange:s,isSubmitting:r,isModalOpen:d,openCreateModal:f,openEditModal:R,closeModal:C,handleSubmit:M,isEdit:S}=W(l),{complaintDelete:N,deleteComplaintData:g,setDeleteComplaintData:y,showDeleteModal:k,setShowDeleteModal:a}=B(l),[q,o]=E.useState({open:!1,data:null}),v=[{title:"Requester Name",dataIndex:"complainerName",key:"requesterName",render:(t,n)=>e.jsxs(w,{children:[e.jsx(b,{src:n.avatar}),t]})},{title:"Request Name",dataIndex:"complaintName",key:"requestName"},{title:"Description",dataIndex:"discription",key:"description",ellipsis:{showTitle:!1},render:t=>e.jsx(L,{placement:"topLeft",title:t,children:t})},{title:"Unit Number",dataIndex:"unitNumber",key:"unitNumber",render:(t,n)=>e.jsx(j,{color:"blue",children:n.unitId.unitNumber})},{title:"Priority",key:"priority",dataIndex:"priorityStatus",render:t=>{let n=t==="High"?"red":t==="Medium"?"blue":"green";return e.jsx(j,{color:n,children:t==null?void 0:t.toUpperCase()},t)}},{title:"Status",key:"status",dataIndex:"status",render:t=>{let n=t==="Pending"?"gold":t==="Open"?"cyan":"lime";return e.jsx(j,{color:n,children:t.toUpperCase()},t)}},{title:"Action",key:"action",render:(t,n)=>e.jsxs(w,{size:"middle",children:[e.jsx(u,{type:"primary",size:"small",icon:p.Edit,className:"edit-btn",onClick:()=>R(n)}),e.jsx(u,{type:"primary",size:"small",icon:p.EyeShow,className:"view-btn",onClick:()=>o({open:!0,data:n})}),e.jsx(u,{type:"primary",size:"small",icon:p.Trash,onClick:()=>{a(!0),y(n)}})]})}],I=async()=>{g&&((await N(g._id)).success?(a(!1),y(null),await refetchAnnouncements()):console.log("Error deleting announcement"))};return e.jsxs(e.Fragment,{children:[e.jsx(z,{title:"Complaint Request || SMC",description:"Request a complaint through the society management system.",keywords:"society, complaint request, submit complaint, society management",ogTitle:"Complaint Request || SMC",ogDescription:"Request a complaint and get timely responses through the Society Management System.",ogUrl:"https://dashstack-smc.web.app/admin/complaint/request",twitterCard:"summary_large_image",twitterTitle:"Complaint Request || SMC",twitterDescription:"Submit your complaint request to your society management."}),e.jsx(A,{title:"Request Tracking",headerContent:e.jsx(u,{variant:"primary",onClick:f,children:"Create Request"}),children:e.jsx(_,{tableColumn:v,dataSource:c,pagination:!1,loading:h})}),e.jsx(H,{open:d,handleCancel:C,handleClose:C,handleOk:M,formData:m,handleChange:s,isSubmitting:r,isEdit:S}),e.jsx(V,{open:q.open,complaintData:q.data,handleCancel:()=>o({open:!1,data:null}),handleClose:()=>o({open:!1,data:null}),handleOk:()=>o({open:!1,data:null})}),e.jsx(O,{title:"Delete Request?",isModalOpen:k,handleClose:()=>a(!1),handleOk:I,onCancel:()=>a(!1),children:"Are you sure you want to delete this request?"})]})};export{G as default};
