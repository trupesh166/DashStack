import{r as l,U as g,P as m,_ as d,j as o,i as h,z as f,E as x,H as y}from"./index-Cx4XMxsI.js";const p=()=>{const[i,r]=l.useState([]),[n,a]=l.useState(!1),{societyId:e}=g();return l.useEffect(()=>{if(!e)return;(async()=>{a(!0);try{const s=await m(e);if(console.log(s),s.message==="Success"&&s.data){const c=s.data.map((t,u)=>({key:t._id||u,name:t.visitorName||"-",avatar:t.avatar||"",phone:t.phone||"-",date:t.date||"-",time:t.time||"-",unit:t.unitName||"-",unitNumber:t.unitNumber||"-"}));r(c)}else d.info("No visitor logs available."),r([])}catch(s){d.error("Failed to fetch visitor logs."),console.error("Fetch error:",s)}finally{a(!1)}})()},[e]),{data:i,isLoading:n}},v=()=>{const{data:i,isLoading:r}=p(),n=[{title:"Visitor Name",dataIndex:"name",key:"name",render:(a,e)=>o.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[o.jsx(x,{src:e.avatar,size:40,style:{marginRight:8}}),a]})},{title:"Phone Number",dataIndex:"phone",key:"phone"},{title:"Date",dataIndex:"date",key:"date"},{title:"Unit Number",key:"unit",render:(a,e)=>o.jsxs("span",{children:[o.jsx(y,{color:"blue",style:{marginRight:8},children:e.unit}),e.unitNumber]})},{title:"Time",dataIndex:"time",key:"time"}];return o.jsx(h,{title:"Visitor Logs",children:o.jsx(f,{dataSource:i,tableColumn:n,pagination:!1,loading:r,rowClassName:(a,e)=>e%2===0?"table-row-light":"table-row-dark"})})};export{v as default};
